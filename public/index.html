<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title id="browserTitle">Proxy King</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lilita+One&family=Inter:wght@100..900&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      /* Ocean Theme (default) */
      --bg-primary: #0a1628;
      --bg-secondary: #0f1f2e;
      --text-primary: #e0f2ff;
      --text-secondary: #b3d9ff;
      --accent-primary: #0ea5e9;
      --accent-secondary: #06b6d4;
      --border: #0ea5e9;
      --theme-name: 'Ocean';
    }

    html.theme-space {
      --bg-primary: #0f0f1e;
      --bg-secondary: #1a1a2e;
      --text-primary: #e0dcff;
      --text-secondary: #b8b0ff;
      --accent-primary: #7c3aed;
      --accent-secondary: #a78bfa;
      --border: #7c3aed;
      --theme-name: 'Space';
    }

    html.theme-light {
      --bg-primary: #f5f5f7;
      --bg-secondary: #ffffff;
      --text-primary: #1a1a1a;
      --text-secondary: #424245;
      --accent-primary: #0ea5e9;
      --accent-secondary: #06b6d4;
      --border: #0ea5e9;
      --theme-name: 'Light';
    }

    html.theme-dark {
      --bg-primary: #1a1a1a;
      --bg-secondary: #2a2a2a;
      --text-primary: #e5e5e5;
      --text-secondary: #b0b0b0;
      --accent-primary: #ef4444;
      --accent-secondary: #fca5a5;
      --border: #ef4444;
      --theme-name: 'Dark';
    }

    html.theme-forest {
      --bg-primary: #0d2818;
      --bg-secondary: #1a3a2a;
      --text-primary: #d0f0d0;
      --text-secondary: #a8d8a8;
      --accent-primary: #10b981;
      --accent-secondary: #6ee7b7;
      --border: #10b981;
      --theme-name: 'Forest';
    }

    html.theme-sunset {
      --bg-primary: #2a1810;
      --bg-secondary: #3d2514;
      --text-primary: #ffe4cc;
      --text-secondary: #ffc299;
      --accent-primary: #fb923c;
      --accent-secondary: #fdba74;
      --border: #fb923c;
      --theme-name: 'Sunset';
    }

    html.theme-midnight {
      --bg-primary: #0c0e27;
      --bg-secondary: #151a3f;
      --text-primary: #e8d5ff;
      --text-secondary: #c4a8ff;
      --accent-primary: #a855f7;
      --accent-secondary: #d8b4fe;
      --border: #a855f7;
      --theme-name: 'Midnight';
    }

    html.theme-teal {
      --bg-primary: #0d2d2d;
      --bg-secondary: #1a4545;
      --text-primary: #ccf2f0;
      --text-secondary: #99e9e5;
      --accent-primary: #14b8a6;
      --accent-secondary: #2dd4bf;
      --border: #14b8a6;
      --theme-name: 'Teal';
    }

    html.theme-cherry {
      --bg-primary: #2a0a1a;
      --bg-secondary: #3d1428;
      --text-primary: #ffccdd;
      --text-secondary: #ff99bb;
      --accent-primary: #ec4899;
      --accent-secondary: #f472b6;
      --border: #ec4899;
      --theme-name: 'Cherry';
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      transition: background 0.3s ease, color 0.3s ease;
    }

    /* Navigation Bar */
    .navbar {
      background: linear-gradient(135deg, rgba(10, 22, 40, 0.95) 0%, rgba(15, 31, 46, 0.95) 100%);
      padding: 15px 30px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      box-shadow: 0 4px 20px rgba(14, 165, 233, 0.2);
      position: sticky;
      top: 0;
      z-index: 999;
      border-bottom: 2px solid var(--accent-primary);
    }

    .navbar-brand {
      font-family: 'Lilita One', cursive;
      font-size: 1.8em;
      color: var(--accent-primary);
      text-shadow: 0 0 10px rgba(14, 165, 233, 0.5);
    }

    .navbar-nav {
      display: flex;
      gap: 30px;
      align-items: center;
    }

    .nav-link {
      font-family: 'Inter', sans-serif;
      color: var(--text-primary);
      text-decoration: none;
      font-size: 1em;
      font-weight: 500;
      padding: 8px 16px;
      border-radius: 6px;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .nav-link:hover {
      background: var(--accent-primary);
      color: white;
      transform: translateY(-2px);
    }

    .nav-link.active {
      background: var(--accent-primary);
      color: white;
      box-shadow: 0 0 12px var(--accent-primary);
    }

    /* Page Container */
    .page {
      display: none;
      animation: fadeIn 0.4s ease-out;
    }

    .page.active {
      display: block;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .container {
      position: relative;
      z-index: 2;
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    /* Header - Home Page */
    header {
      background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
      padding: 40px 20px;
      text-align: center;
      border-radius: 12px;
      margin-bottom: 30px;
      box-shadow: 0 8px 32px rgba(14, 165, 233, 0.3);
      animation: slideDown 0.8s ease-out;
      transition: all 0.3s ease;
    }

    @keyframes slideDown {
      from {
        transform: translateY(-50px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    h1 {
      font-family: 'Lilita One', cursive;
      font-size: 3em;
      text-shadow: 0 0 20px rgba(255, 255, 255, 0.4);
      letter-spacing: 2px;
      animation: glow 3s ease-in-out infinite;
      color: white;
    }

    @keyframes glow {
      0%, 100% {
        text-shadow: 0 0 20px rgba(255, 255, 255, 0.4), 0 0 40px rgba(255, 255, 255, 0.2);
      }
      50% {
        text-shadow: 0 0 30px rgba(255, 255, 255, 0.6), 0 0 60px rgba(255, 255, 255, 0.3);
      }
    }

    header p {
      font-family: 'Lilita One', cursive;
      color: white;
      font-size: 0.9em;
      letter-spacing: 1px;
      margin-top: 10px;
    }

    /* Tabs system */
    .tabs-container {
      display: flex;
      gap: 8px;
      margin-bottom: 20px;
      flex-wrap: wrap;
      animation: fadeIn 0.6s ease-out;
    }

    .tab-wrapper {
      display: flex;
      gap: 4px;
      align-items: center;
    }

    .tab-btn {
      padding: 10px 16px;
      background: var(--bg-secondary);
      border: 2px solid transparent;
      border-radius: 6px;
      color: var(--text-primary);
      font-family: 'Inter', sans-serif;
      font-size: 0.9em;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .tab-btn:hover {
      border-color: var(--accent-primary);
      background: rgba(14, 165, 233, 0.1);
    }

    .tab-btn.active {
      background: var(--accent-primary);
      color: white;
      border-color: var(--accent-primary);
      box-shadow: 0 0 12px var(--accent-primary);
    }

    .tab-close-btn {
      width: 24px;
      height: 24px;
      padding: 0;
      background: rgba(239, 68, 68, 0.7);
      border: none;
      border-radius: 50%;
      color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Inter', sans-serif;
      transition: all 0.2s ease;
      font-size: 0.8em;
    }

    .tab-close-btn:hover {
      background: #ef4444;
      transform: scale(1.15);
    }

    /* Form */
    #idk {
      display: flex;
      gap: 10px;
      margin-bottom: 25px;
      flex-wrap: wrap;
      justify-content: center;
      animation: fadeIn 0.8s ease-out 0.2s both;
    }

    #url {
      flex: 1;
      min-width: 280px;
      padding: 12px 18px;
      font-size: 0.95em;
      font-family: 'Inter', sans-serif;
      background: var(--bg-secondary);
      border: 2px solid var(--accent-primary);
      border-radius: 8px;
      color: var(--text-primary);
      transition: all 0.3s ease;
    }

    #url::placeholder {
      color: rgba(255, 255, 255, 0.5);
    }

    html.theme-light #url::placeholder {
      color: rgba(0, 0, 0, 0.3);
    }

    #url:focus {
      outline: none;
      border-color: var(--accent-secondary);
      box-shadow: 0 0 15px var(--accent-primary);
    }

    #proxysel, #searchEngine {
      padding: 12px 16px;
      font-size: 0.95em;
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
      border: none;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      min-width: 140px;
      box-shadow: 0 2px 8px rgba(14, 165, 233, 0.3);
    }

    #proxysel:hover, #searchEngine:hover {
      box-shadow: 0 4px 12px var(--accent-primary);
      transform: translateY(-2px);
    }

    #proxysel:focus, #searchEngine:focus {
      outline: none;
    }

    #proxysel option, #searchEngine option {
      background: var(--bg-primary);
      color: var(--text-primary);
      padding: 8px;
    }

    #idk button {
      padding: 12px 35px;
      font-size: 0.95em;
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
      border: none;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: bold;
      box-shadow: 0 4px 12px var(--accent-primary);
      white-space: nowrap;
    }

    #idk button:hover {
      box-shadow: 0 6px 18px var(--accent-primary);
      transform: translateY(-2px);
    }

    #idk button:active {
      transform: translateY(0);
    }

    .button-group {
      display: flex;
      gap: 8px;
    }

    #iframe {
      width: 100%;
      height: 700px;
      border: 2px solid var(--accent-primary);
      border-radius: 8px;
      background: var(--bg-secondary);
    }

    /* Floating toolbar - only with cache and fullscreen now */
    .floating-toolbar {
      position: fixed;
      bottom: 20px;
      right: 20px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      z-index: 1000;
    }

    .toolbar-btn {
      width: 55px;
      height: 55px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
      border: none;
      color: white;
      font-size: 1.3em;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 15px var(--accent-primary);
      transition: all 0.3s ease;
    }

    .toolbar-btn:hover {
      box-shadow: 0 6px 25px var(--accent-primary);
      transform: scale(1.1);
    }

    .toolbar-btn:active {
      transform: scale(0.95);
    }

    /* Settings Page */
    .settings-container {
      background: var(--bg-secondary);
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(14, 165, 233, 0.2);
      max-width: 600px;
      margin: 0 auto;
    }

    .settings-container h2 {
      font-family: 'Lilita One', cursive;
      font-size: 2em;
      color: var(--accent-primary);
      margin-bottom: 30px;
      text-align: center;
    }

    .settings-section {
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 2px solid var(--accent-primary);
    }

    .settings-section:last-child {
      border-bottom: none;
    }

    .settings-section h3 {
      font-family: 'Lilita One', cursive;
      color: var(--text-primary);
      margin-bottom: 15px;
      font-size: 1.3em;
    }

    .settings-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin: 15px 0;
      color: var(--text-primary);
      font-family: 'Inter', sans-serif;
    }

    .settings-row label {
      flex: 1;
    }

    #themeSelector {
      padding: 10px 15px;
      font-family: 'Inter', sans-serif;
      background: var(--bg-primary);
      border: 2px solid var(--accent-primary);
      border-radius: 6px;
      color: var(--text-primary);
      cursor: pointer;
      font-size: 0.95em;
      transition: all 0.3s ease;
      min-width: 180px;
    }

    #themeSelector:hover {
      box-shadow: 0 0 10px var(--accent-primary);
    }

    #themeSelector option {
      background: var(--bg-primary);
      color: var(--text-primary);
      padding: 8px;
    }

    #websiteTitle {
      padding: 10px 15px;
      font-family: 'Inter', sans-serif;
      background: var(--bg-primary);
      border: 2px solid var(--accent-primary);
      border-radius: 6px;
      color: var(--text-primary);
      font-size: 0.95em;
      transition: all 0.3s ease;
      flex: 1;
      min-width: 200px;
    }

    #websiteTitle:focus {
      outline: none;
      box-shadow: 0 0 10px var(--accent-primary);
    }

    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 55px;
      height: 28px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: 0.4s;
      border-radius: 28px;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 22px;
      width: 22px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: 0.4s;
      border-radius: 50%;
    }

    input:checked + .toggle-slider {
      background-color: var(--accent-primary);
    }

    input:checked + .toggle-slider:before {
      transform: translateX(27px);
    }

    .clear-btn {
      width: 100%;
      padding: 12px 24px;
      margin-top: 20px;
      font-size: 1em;
      border-radius: 8px;
      background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
      border: none;
      color: white;
      cursor: pointer;
      font-family: 'Inter', sans-serif;
      transition: all 0.3s ease;
    }

    .clear-btn:hover {
      box-shadow: 0 6px 18px var(--accent-primary);
      transform: translateY(-2px);
    }

    /* Modals */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      z-index: 2000;
      justify-content: center;
      align-items: center;
      animation: fadeIn 0.3s ease;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: var(--bg-secondary);
      padding: 30px;
      border-radius: 12px;
      max-width: 500px;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
      border: 2px solid var(--accent-primary);
      position: relative;
    }

    .modal-close {
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 2em;
      cursor: pointer;
      color: var(--text-secondary);
      transition: color 0.2s ease;
    }

    .modal-close:hover {
      color: var(--accent-primary);
    }

    .modal-content h2 {
      font-family: 'Lilita One', cursive;
      color: var(--accent-primary);
      margin-bottom: 20px;
      font-size: 1.8em;
    }

    .modal-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px;
      background: var(--bg-primary);
      border-radius: 6px;
      margin-bottom: 8px;
      color: var(--text-primary);
      font-family: 'Inter', sans-serif;
    }

    .modal-item span {
      flex: 1;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      font-size: 0.9em;
    }

    .modal-item button {
      padding: 6px 12px;
      background: var(--accent-primary);
      border: none;
      border-radius: 4px;
      color: white;
      cursor: pointer;
      font-family: 'Inter', sans-serif;
      font-size: 0.75em;
      transition: all 0.2s ease;
      white-space: nowrap;
    }

    .modal-item button:hover {
      background: var(--accent-secondary);
      transform: translateY(-1px);
    }

    /* Games Page */
    .games-container {
      text-align: center;
      padding: 60px 20px;
    }

    .games-container h2 {
      font-family: 'Lilita One', cursive;
      font-size: 2.5em;
      color: var(--accent-primary);
      margin-bottom: 20px;
    }

    .games-container p {
      font-family: 'Inter', sans-serif;
      font-size: 1.1em;
      color: var(--text-secondary);
    }

    /* Search Suggestions Dropdown */
    .search-suggestions-wrapper {
      position: relative;
      flex: 1;
      min-width: 280px;
    }

    .search-suggestions {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: var(--bg-secondary);
      border: 2px solid var(--accent-primary);
      border-top: none;
      border-radius: 0 0 8px 8px;
      max-height: 300px;
      overflow-y: auto;
      display: none;
      z-index: 100;
      box-shadow: 0 8px 24px rgba(14, 165, 233, 0.3);
    }

    .search-suggestions.show {
      display: block;
      animation: slideDown 0.2s ease-out;
    }

    .suggestion-item {
      padding: 12px 18px;
      border-bottom: 1px solid rgba(14, 165, 233, 0.2);
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 10px;
      font-family: 'Inter', sans-serif;
      font-size: 0.95em;
      color: var(--text-secondary);
    }

    .suggestion-item:last-child {
      border-bottom: none;
    }

    .suggestion-item:hover {
      background: rgba(14, 165, 233, 0.1);
      color: var(--accent-primary);
      padding-left: 24px;
    }

    .suggestion-icon {
      font-size: 1.2em;
      flex-shrink: 0;
    }

    .suggestion-text {
      flex: 1;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .suggestion-category {
      font-size: 0.75em;
      opacity: 0.6;
      margin-top: 2px;
    }

    /* Scrollbar for suggestions */
    .search-suggestions::-webkit-scrollbar {
      width: 8px;
    }

    .search-suggestions::-webkit-scrollbar-track {
      background: transparent;
    }

    .search-suggestions::-webkit-scrollbar-thumb {
      background: var(--accent-primary);
      border-radius: 4px;
    }

    .search-suggestions::-webkit-scrollbar-thumb:hover {
      background: var(--accent-secondary);
    }

    @media (max-width: 768px) {
      h1 {
        font-size: 2em;
      }

      .container {
        padding: 20px 15px;
      }

      header {
        padding: 25px 15px;
        margin-bottom: 20px;
      }

      .navbar {
        padding: 12px 15px;
        flex-direction: column;
        gap: 15px;
      }

      .navbar-brand {
        font-size: 1.4em;
      }

      .navbar-nav {
        gap: 15px;
      }

      .nav-link {
        font-size: 0.9em;
        padding: 6px 12px;
      }

      #idk {
        flex-direction: column;
        gap: 12px;
      }

      #url, #proxysel, #searchEngine {
        width: 100%;
        min-width: unset;
      }

      .button-group {
        width: 100%;
        flex-direction: column;
      }

      .button-group button {
        width: 100%;
      }

      #iframe {
        height: 500px;
      }

      .floating-toolbar {
        bottom: 20px;
        right: 20px;
        gap: 10px;
      }

      .toolbar-btn {
        width: 50px;
        height: 50px;
        font-size: 1.1em;
      }

      .tabs-container {
        margin-bottom: 15px;
      }

      .tab-btn {
        padding: 8px 14px;
        font-size: 0.85em;
      }

      .settings-container {
        padding: 20px;
      }
    }
  </style>
</head>
<body>
  <!-- Navigation Bar -->
  <nav class="navbar">
    <div class="navbar-brand">PROXY KING</div>
    <div class="navbar-nav">
      <a class="nav-link active" onclick="switchPage('home')">Home</a>
      <a class="nav-link" onclick="switchPage('games')">Games</a>
      <a class="nav-link" onclick="switchPage('settings')">Settings</a>
    </div>
  </nav>

  <!-- Home Page -->
  <div id="home" class="page active">
    <div class="container">
      <header>
        <h1>PROXY KING</h1>
        <p>SECURE ‚Ä¢ FAST ‚Ä¢ ANONYMOUS</p>
      </header>

      <!-- Tabs system -->
      <div class="tabs-container" id="tabsContainer"></div>

      <form id="idk">
        <div class="search-suggestions-wrapper">
          <input
            id="url"
            type="text"
            class="search-input search"
            placeholder="Enter URL or search..."
            autocomplete="off"
          />
          <div class="search-suggestions" id="searchSuggestions"></div>
        </div>
        <select id="proxysel">
          <option value="uv">ULTRAVIOLET</option>
          <option value="scramjet">SCRAMJET</option>
        </select>
        <select id="searchEngine">
          <option value="google">GOOGLE</option>
          <option value="bing">BING</option>
          <option value="qwant">QWANT</option>
          <option value="ecosia">ECOSIA</option>
          <option value="duckduckgo">DUCKDUCKGO</option>
        </select>
        <div class="button-group">
          <button type="submit">GO</button>
          <button type="button" id="newTabProxyBtn">OPEN IN NEW TAB</button>
        </div>
      </form>

      <iframe id="iframe"></iframe>
    </div>
  </div>

  <!-- Games Page -->
  <div id="games" class="page">
    <div class="container">
      <div class="games-container">
<style>
    .button {
        background-color: black;
        border: none;
        color: white;
        padding: 1px 1px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 2px 2px;
        cursor: pointer;
        border-radius: 12px;
        transition: background-color 0.3s,
        color 0.2s, transform .4s;
        
}
a.link:hover {
  background-color: white;
       transform: scale(1.1);
        color: black;
        border: none;
        padding: 1px 1px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 2px 2px;
        cursor: pointer;
        border-radius: 12px;
}
</style>

<div class="content">
&nbsp;
<base><a class="link button" href="./roblox.html" style="padding:0px;margin:7px 7px 7px 5px;float:left;text-decoration:none" target="_blank"><img height="175" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTJcD8fHiiZTG2Y7gncLDqDl4ZvxW8xdFjTVlEb4D2xG0_RNGROFVvpUgjKl3seqIO-cz0:https://play-lh.googleusercontent.com/WNWZaxi9RdJKe2GQM3vqXIAkk69mnIl4Cc8EyZcir2SKlVOxeUv9tZGfNTmNaLC717Ht%3Dw240-h480-rw&usqp=CAU" width="177"><span style="padding:3px;margin:auto;display:block;width:170px;height:25px;line-height:25px;overflow:hidden;text-align:center;white-space:nowrap">Roblox</span></a>
<base><a class="link button" href="./bandit-rip.html" style="padding:0px;margin:7px 7px 7px 5px;float:left;text-decoration:none" target="_blank"><img height="175" src="https://obfog.com/content/icons/bandit-rip-icon-1.jpg" width="177"><span style="padding:3px;margin:auto;display:block;width:170px;height:25px;line-height:25px;overflow:hidden;text-align:center;white-space:nowrap">Bandit Rip</span></a>
<base><a class="link button" href="./stumble-guys.html" style="padding:0px;margin:7px 7px 7px 5px;float:left;text-decoration:none" target="_blank"><img height="175" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQxHJhfqJwuQgxBoffx8G-BSODapKndNTwwqY6M-MfFPho9VcLhQvH7JXmrTgT2Qk6TMzs:https://play-lh.googleusercontent.com/Oci7f4WR0JShbn-n5hnwubbXaMssleb2b1Dv7AMOzFFcgstIdC9kg-E3LHx3em8RCaLf&usqp=CAU" width="177"><span style="padding:3px;margin:auto;display:block;width:170px;height:25px;line-height:25px;overflow:hidden;text-align:center;white-space:nowrap">Stumble Guys</span></a>
<base><a class="link button" href="https://1v1lol.agentcube.repl.co/" style="padding:0px;margin:7px 7px 7px 5px;float:left;text-decoration:none" target="_blank"><img height="175" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQyDlvtzYj-rKPNzRVCGh_y-Egvdg3Pfn6RHpIrKigickRpHyby91yoEciFXXqBTlPYVSQ:https://static.wikia.nocookie.net/gamia_gamepedia_en/images/c/c9/1v1LOL.png/revision/latest%3Fcb%3D20210516161122&usqp=CAU" width="177"><span style="padding:3px;margin:auto;display:block;width:170px;height:25px;line-height:25px;overflow:hidden;text-align:center;white-space:nowrap">1v1.lol</span></a>
<base><a class="link button" href="https://game.darkspeed.repl.co/subway-surfers/" style="padding:0px;margin:7px 7px 7px 5px;float:left;text-decoration:none" target="_blank"><img height="175" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQSqcMjIB0SrB3osd8wX7kleku1hCOuqV8Tkd4H_QbrYfFuGTxa9HLiUROfL8x1tes_m5I:https://static.wikia.nocookie.net/subwaysurf/images/1/10/VeniceBeach2021Icon.png/revision/latest/scale-to-width-down/250%3Fcb%3D20211122165850&usqp=CAU" width="177"><span style="padding:3px;margin:auto;display:block;width:170px;height:25px;line-height:25px;overflow:hidden;text-align:center;white-space:nowrap">Subway Surfers</span></a>


<base><a class="link button" href="https://moregames.agentcube.repl.co/files/1/index.html" style="padding:0px;margin:7px 7px 7px 5px;float:left;text-decoration:none" target="_blank"><img height="175" src="https://raw.githubusercontent.com/Darkspeed0/Games-Integrity/main/1/meta/apple-touch-icon.png" width="177"><span style="padding:3px;margin:auto;display:block;width:170px;height:25px;line-height:25px;overflow:hidden;text-align:center;white-space:nowrap">1</span></a>
<base><a class="link button" href="https://moregames.agentcube.repl.co/files/10-minutes-till-dawn/index.html" style="padding:0px;margin:7px 7px 7px 5px;float:left;text-decoration:none" target="_blank"><img height="175" src="https://raw.githubusercontent.com/Darkspeed0/Games-Integrity/main/10-minutes-till-dawn/splash.png" width="177"><span style="padding:3px;margin:auto;display:block;width:170px;height:25px;line-height:25px;overflow:hidden;text-align:center;white-space:nowrap">10 minutes till dawn</span></a>
<base><a class="link button" href="https://moregames.agentcube.repl.co/files/100ng/index.html" style="padding:0px;margin:7px 7px 7px 5px;float:left;text-decoration:none" target="_blank"><img height="175" src="https://github.com/Darkspeed0/Games-Integrity/blob/main/100ng/100ng.jpg?raw=true" width="177"><span style="padding:3px;margin:auto;display:block;width:170px;height:25px;line-height:25px;overflow:hidden;text-align:center;white-space:nowrap">100 player pong</span></a>
<base><a class="link button" href="https://moregames.agentcube.repl.co/files/1v1space/index.html" style="padding:0px;margin:7px 7px 7px 5px;float:left;text-decoration:none" target="_blank"><img height="175" src="https://github.com/Darkspeed0/Games-Integrity/blob/main/1v1space/splash.png?raw=true" width="177"><span style="padding:3px;margin:auto;display:block;width:170px;height:25px;line-height:25px;overflow:hidden;text-align:center;white-space:nowrap">1v1.space</span></a>
<base><a class="link button" href="https://moregames.agentcube.repl.co/files/2048/index.html" style="padding:0px;margin:7px 7px 7px 5px;float:left;text-decoration:none" target="_blank"><img height="175" src="https://github.com/Darkspeed0/Games-Integrity/blob/main/2048/2048.png?raw=true" width="177"><span style="padding:3px;margin:auto;display:block;width:170px;height:25px;line-height:25px;overflow:hidden;text-align:center;white-space:nowrap">2048</span></a>
<base><a class="link button" href="https://moregames.agentcube.repl.co/files/2048-multitask/index.html" style="padding:0px;margin:7px 7px 7px 5px;float:left;text-decoration:none" target="_blank"><img height="175" src="https://github.com/Darkspeed0/Games-Integrity/blob/main/2048-multitask/splash.png?raw=true" width="177"><span style="padding:3px;margin:auto;display:block;width:170px;height:25px;line-height:25px;overflow:hidden;text-align:center;white-space:nowrap">2048 Multitask</span></a>
<base><a class="link button" href="https://moregames.agentcube.repl.co/files/9007199254740992/index.html" style="padding:0px;margin:7px 7px 7px 5px;float:left;text-decoration:none" target="_blank"><img height="175" src="https://github.com/Darkspeed0/Games-Integrity/blob/main/9007199254740992/logo-4.png?raw=true" width="177"><span style="padding:3px;margin:auto;display:block;width:170px;height:25px;line-height:25px;overflow:hidden;text-align:center;white-space:nowrap">9007199254740992</span></a>
<base><a class="link button" href="https://moregames.agentcube.repl.co/files/99balls/index.html" style="padding:0px;margin:7px 7px 7px 5px;float:left;text-decoration:none" target="_blank"><img height="175" src="https://github.com/Darkspeed0/Games-Integrity/blob/main/99balls/99-balls-evo.jpg?raw=true" width="177"><span style="padding:3px;margin:auto;display:block;width:170px;height:25px;line-height:25px;overflow:hidden;text-align:center;white-space:nowrap">99balls</span></a>
<base><a class="link button" href="https://moregames.agentcube.repl.co/files/a-dance-of-fire-and-ice/index.html" style="padding:0px;margin:7px 7px 7px 5px;float:left;text-decoration:none" target="_blank"><img height="175" src="https://github.com/Darkspeed0/Games-Integrity/blob/main/a-dance-of-fire-and-ice/splash.png?raw=true" width="177"><span style="padding:3px;margin:auto;display:block;width:170px;height:25px;line-height:25px;overflow:hidden;text-align:center;white-space:nowrap">A Dance of Fire and Ice</span></a>
<base><a class="link button" href="https://moregames.agentcube.repl.co/files/adarkroom/index.html" style="padding:0px;margin:7px 7px 7px 5px;float:left;text-decoration:none" target="_blank"><img height="175" src="https://github.com/Darkspeed0/Games-Integrity/blob/main/adarkroom/splash.png?raw=true" width="177"><span style="padding:3px;margin:auto;display:block;width:170px;height:25px;line-height:25px;overflow:hidden;text-align:center;white-space:nowrap">A Dark Room</span></a>
<base><a class="link button" href="https://moregames.agentcube.repl.co/files/achievementunlocked/index.html" style="padding:0px;margin:7px 7px 7px 5px;float:left;text-decoration:none" target="_blank"><img height="175" src="https://github.com/Darkspeed0/Games-Integrity/blob/main/achievementunlocked/achievementunlocked.png?raw=true" width="177"><span style="padding:3px;margin:auto;display:block;width:170px;height:25px;line-height:25px;overflow:hidden;text-align:center;white-space:nowrap">Achievement Unlocked</span></a>
<base><a class="link button" href="https://moregames.agentcube.repl.co/files/adventure-drivers/index.html" style="padding:0px;margin:7px 7px 7px 5px;float:left;text-decoration:none" target="_blank"><img height="175" src="https://github.com/Darkspeed0/Games-Integrity/blob/main/adventure-drivers/splash.png?raw=true" width="177"><span style="padding:3px;margin:auto;display:block;width:170px;height:25px;line-height:25px;overflow:hidden;text-align:center;white-space:nowrap">Adventure Drivers</span></a>
<base><a class="link button" href="https://moregames.agentcube.repl.co/files/ages-of-conflict/index.html" style="padding:0px;margin:7px 7px 7px 5px;float:left;text-decoration:none" target="_blank"><img height="175" src="https://github.com/Darkspeed0/Games-Integrity/blob/main/ages-of-conflict/splash.jpg?raw=true" width="177"><span style="padding:3px;margin:auto;display:block;width:170px;height:25px;line-height:25px;overflow:hidden;text-align:center;white-space:nowrap">Ages of Conflict</span></a>
<base><a class="link button" href="https://moregames.agentcube.repl.co/files/alienhominid/index.html" style="padding:0px;margin:7px 7px 7px 5px;float:left;text-decoration:none" target="_blank"><img height="175" src="https://github.com/Darkspeed0/Games-Integrity/blob/main/alienhominid/alienhominid.jpg?raw=true" width="177"><span style="padding:3px;margin:auto;display:block;width:170px;height:25px;line-height:25px;overflow:hidden;text-align:center;white-space:nowrap">Alien Hominid</span></a>
<base><a class="link button" href="https://moregames.agentcube.repl.co/files/amazing-rope-police/index.html" style="padding:0px;margin:7px 7px 7px 5px;float:left;text-decoration:none" target="_blank"><img height="175" src="https://github.com/Darkspeed0/Games-Integrity/blob/main/amazing-rope-police/splash.jpeg?raw=true" width="177"><span style="padding:3px;margin:auto;display:block;width:170px;height:25px;line-height:25px;overflow:hidden;text-align:center;white-space:nowrap">Amazing Rope Police</span></a>
<base><a class="link button" href="https://moregames.agentcube.repl.co/files/amidst-the-clouds/index.html" style="padding:0px;margin:7px 7px 7px 5px;float:left;text-decoration:none" target="_blank"><img height="175" src="https://github.com/Darkspeed0/Games-Integrity/blob/main/amidst-the-clouds/splash.png?raw=true" width="177"><span style="padding:3px;margin:auto;display:block;width:170px;height:25px;line-height:25px;overflow:hidden;text-align:center;white-space:nowrap">Amidst the Clouds</span></a>

      </div>
    </div>
  </div>

  <!-- Settings Page -->
  <div id="settings" class="page">
    <div class="container">
      <div class="settings-container">
        <h2>Settings</h2>

        <!-- Theme Selector -->
        <div class="settings-section">
          <h3>Color Theme</h3>
          <div class="settings-row">
            <label>Select Theme:</label>
            <select id="themeSelector">
              <option value="ocean">üåä Ocean - Cool Blue</option>
              <option value="space">üåå Space - Deep Purple</option>
              <option value="light">‚òÄÔ∏è Light - Bright & Clean</option>
              <option value="dark">üåë Dark - Minimal Red</option>
              <option value="forest">üå≤ Forest - Deep Green</option>
              <option value="sunset">üåÖ Sunset - Warm Orange</option>
              <option value="midnight">üåÉ Midnight - Royal Purple</option>
              <option value="teal">üíé Teal - Turquoise</option>
              <option value="cherry">üçí Cherry - Rose Pink</option>
            </select>
          </div>
        </div>

        <!-- Website Title Customization -->
        <div class="settings-section">
          <h3>Browser Tab Title</h3>
          <div class="settings-row">
            <label>Custom Title:</label>
            <input type="text" id="websiteTitle" placeholder="Enter custom browser tab title" maxlength="50">
          </div>
          <p style="font-size: 0.85em; color: var(--text-secondary); margin-top: 8px;">Leave empty to use default "Proxy King"</p>
        </div>

        <!-- Cache Management -->
        <div class="settings-section">
          <h3>Cache Management</h3>
          <button class="clear-btn" onclick="openModal('cacheModal')">View Cache</button>
          <button class="clear-btn" onclick="clearAllCache()">Clear All Cache</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Floating toolbar (only new tab and fullscreen) -->
  <div class="floating-toolbar" id="toolbar">
    <button class="toolbar-btn" title="New Tab" id="newTabBtn">+</button>
    <button class="toolbar-btn" title="Fullscreen" id="fullscreenBtn">‚õ∂</button>
  </div>

  <!-- Cache Manager Modal -->
  <div class="modal" id="cacheModal">
    <div class="modal-content">
      <span class="modal-close" onclick="closeModal('cacheModal')">&times;</span>
      <h2>Cache Manager</h2>
      <div id="cacheList"></div>
      <button class="clear-btn" onclick="clearAllCache()">Clear All</button>
    </div>
  </div>

  <script src="/baremux/index.js" defer></script>
  <script src="/uv/uv.bundle.js" defer></script>
  <script src="/uv/uv.config.js" defer></script>
  <script src="/scram/scramjet.all.js" defer></script>
  <script src="/stuff.js" defer></script>

  <script>
    // ===== PAGE MANAGEMENT =====
    function switchPage(pageName) {
      // Hide all pages
      document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
      });

      // Show selected page
      document.getElementById(pageName).classList.add('active');

      // Update nav links
      document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('active');
      });
      event.target.classList.add('active');

      // Save current page
      localStorage.setItem('currentPage', pageName);
    }

    // ===== THEME SYSTEM =====
    const themes = [
      'ocean', 'space', 'light', 'dark', 'forest', 'sunset', 'midnight', 'teal', 'cherry'
    ];

    function applyTheme(themeName) {
      // Remove all theme classes
      themes.forEach(theme => {
        document.documentElement.classList.remove(`theme-${theme}`);
      });

      // Add the selected theme
      if (themeName !== 'ocean') {
        document.documentElement.classList.add(`theme-${themeName}`);
      }

      // Save to localStorage
      localStorage.setItem('theme', themeName);
    }

    function initTheme() {
      const savedTheme = localStorage.getItem('theme') || 'ocean';
      applyTheme(savedTheme);

      // Set selector value
      const selector = document.getElementById('themeSelector');
      if (selector) {
        selector.value = savedTheme;
        selector.addEventListener('change', (e) => {
          applyTheme(e.target.value);
        });
      }
    }

    // ===== TAB SYSTEM =====
    let tabs = [];
    let currentTab = 0;

    function createTab() {
      const tab = {
        id: Date.now(),
        name: `Tab ${tabs.length + 1}`,
        url: "",
        inputUrl: ""
      };
      tabs.push(tab);
      renderTabs();
      switchTab(tabs.length - 1);
    }

    function renderTabs() {
      const container = document.getElementById('tabsContainer');
      container.innerHTML = '';
      tabs.forEach((tab, idx) => {
        const wrapper = document.createElement('div');
        wrapper.className = 'tab-wrapper';
        
        const btn = document.createElement('button');
        btn.className = `tab-btn ${idx === currentTab ? 'active' : ''}`;
        btn.textContent = tab.name.length > 15 ? tab.name.substring(0, 12) + '...' : tab.name;
        btn.title = tab.name;
        btn.onclick = () => switchTab(idx);
        
        const closeBtn = document.createElement('button');
        closeBtn.className = 'tab-close-btn';
        closeBtn.textContent = '‚úï';
        closeBtn.onclick = (e) => {
          e.stopPropagation();
          closeTab(idx);
        };
        
        wrapper.appendChild(btn);
        if (tabs.length > 1) wrapper.appendChild(closeBtn);
        container.appendChild(wrapper);
      });
    }

    function switchTab(idx) {
      if (idx >= 0 && idx < tabs.length) {
        currentTab = idx;
        document.getElementById('iframe').src = tabs[currentTab].url || '';
        document.getElementById('url').value = tabs[currentTab].inputUrl || '';
        renderTabs();
      }
    }

    function updateTabTitle(title) {
      if (tabs[currentTab]) {
        const displayName = title ? title.substring(0, 20) : `Tab ${currentTab + 1}`;
        tabs[currentTab].name = displayName;
        renderTabs();
      }
    }

    function closeTab(idx) {
      tabs.splice(idx, 1);
      if (currentTab >= tabs.length) currentTab = Math.max(0, tabs.length - 1);
      if (tabs.length === 0) createTab();
      else switchTab(currentTab);
      renderTabs();
    }

    // ===== WEBSITE TITLE CUSTOMIZATION =====
    function initWebsiteTitle() {
      const titleInput = document.getElementById('websiteTitle');
      const savedTitle = localStorage.getItem('websiteTitle') || 'Proxy King';

      // Set the browser tab title
      document.getElementById('browserTitle').textContent = savedTitle;

      // Set input value
      if (titleInput) {
        titleInput.value = savedTitle !== 'Proxy King' ? savedTitle : '';
        
        titleInput.addEventListener('change', (e) => {
          const newTitle = e.target.value.trim() || 'Proxy King';
          localStorage.setItem('websiteTitle', newTitle);
          document.getElementById('browserTitle').textContent = newTitle;
        });

        titleInput.addEventListener('keyup', (e) => {
          const newTitle = e.target.value.trim() || 'Proxy King';
          document.getElementById('browserTitle').textContent = newTitle;
        });
      }
    }

    // ===== SEARCH ENGINE SELECTOR =====
    function initSearchEngine() {
      const savedEngine = localStorage.getItem('searchEngine') || 'google';
      const selectElement = document.getElementById('searchEngine');
      if (selectElement) {
        selectElement.value = savedEngine;
        selectElement.addEventListener('change', (e) => {
          localStorage.setItem('searchEngine', e.target.value);
        });
      }
    }

    // ===== CACHE MANAGER =====
    function saveToCacheList(url) {
      if (!url || url.trim() === '') return;
      let cache = JSON.parse(localStorage.getItem('proxyCache') || '[]');
      const cleanUrl = url.substring(0, 80);
      if (!cache.includes(cleanUrl)) {
        cache.unshift(cleanUrl);
        cache = cache.slice(0, 50);
        localStorage.setItem('proxyCache', JSON.stringify(cache));
      }
    }

    function displayCacheList() {
      let cache = JSON.parse(localStorage.getItem('proxyCache') || '[]');
      const list = document.getElementById('cacheList');
      list.innerHTML = '';
      if (cache.length === 0) {
        list.innerHTML = '<p style="color: var(--text-secondary); text-align: center;">No cached items</p>';
        return;
      }
      cache.forEach((url, idx) => {
        const item = document.createElement('div');
        item.className = 'modal-item';
        item.innerHTML = `<span>${url}</span><button onclick="deleteFromCache(${idx})">Delete</button>`;
        list.appendChild(item);
      });
    }

    function deleteFromCache(idx) {
      let cache = JSON.parse(localStorage.getItem('proxyCache') || '[]');
      cache.splice(idx, 1);
      localStorage.setItem('proxyCache', JSON.stringify(cache));
      displayCacheList();
    }

    function clearAllCache() {
      localStorage.setItem('proxyCache', '[]');
      displayCacheList();
      alert('Cache cleared!');
    }

    // ===== MODAL FUNCTIONS =====
    function openModal(id) {
      document.getElementById(id).classList.add('active');
      if (id === 'cacheModal') displayCacheList();
    }

    function closeModal(id) {
      document.getElementById(id).classList.remove('active');
    }

    // Close modal on outside click
    document.querySelectorAll('.modal').forEach(modal => {
      modal.addEventListener('click', (e) => {
        if (e.target === modal) {
          closeModal(modal.id);
        }
      });
    });

    // ===== TOOLBAR BUTTONS =====
    document.getElementById('newTabBtn').addEventListener('click', createTab);
    
    document.getElementById('fullscreenBtn').addEventListener('click', () => {
      const iframe = document.getElementById('iframe');
      if (iframe.requestFullscreen) iframe.requestFullscreen();
      else if (iframe.webkitRequestFullscreen) iframe.webkitRequestFullscreen();
      else if (iframe.mozRequestFullScreen) iframe.mozRequestFullScreen();
      else if (iframe.msRequestFullscreen) iframe.msRequestFullscreen();
    });

    // ===== OPEN IN NEW TAB BUTTON =====
    document.getElementById('newTabProxyBtn').addEventListener('click', (e) => {
      e.preventDefault();
      const userInput = document.getElementById('url').value;
      if (!userInput || userInput.trim() === '') {
        alert('Please enter a URL or search term');
        return;
      }

      // Save to recent searches
      saveSuggestion(userInput);

      // Use the same search logic as form submission
      const proxyBrowser = document.getElementById('proxysel').value;
      
      // Get the fixed URL using same logic as form submission (using search function from stuff.js)
      let fixedUrl = search(userInput);
      
      // Build proxy URL based on selected browser using same encoding as form submission
      let proxyUrl = '';
      if (proxyBrowser === 'uv') {
        proxyUrl = __uv$config.prefix + __uv$config.encodeUrl(fixedUrl);
      } else if (proxyBrowser === 'scramjet') {
        proxyUrl = scramjet.encodeUrl(fixedUrl);
      }

      // Open in new browser tab
      if (proxyUrl) {
        window.open(proxyUrl, '_blank');
      }
    });

    // ===== FORM SUBMISSION =====
    document.getElementById('idk').addEventListener('submit', (e) => {
      try {
        const userInput = document.getElementById('url').value;
        if (userInput) {
          saveSuggestion(userInput);
          suggestionsContainer.classList.remove('show');
        }
        if (userInput && tabs[currentTab]) {
          tabs[currentTab].inputUrl = userInput;
          saveToCacheList(userInput);
          updateTabTitle(userInput);
        }
      } catch (err) {
        console.error("Feature error:", err);
      }
    });

    // ===== IFRAME INTEGRATION =====
    document.getElementById('iframe').addEventListener('load', () => {
      try {
        const iframe = document.getElementById('iframe');
        const iframeDoc = iframe.contentDocument;
        
        if (!iframeDoc) return;
        
        // Get page title
        const title = iframeDoc.title;
        if (title && title.length > 0) updateTabTitle(title);
        
        // Intercept link clicks
        iframeDoc.addEventListener('click', (e) => {
          if (e.target.tagName === 'A') {
            const href = e.target.getAttribute('href');
            const target = e.target.getAttribute('target');
            
            if (target === '_blank' || target === '_new') {
              e.preventDefault();
              if (href && !href.startsWith('javascript:')) {
                createTab();
                const userInput = href.startsWith('http') ? href : 
                                 href.startsWith('/') ? new URL(href, iframe.src).href :
                                 new URL(href, iframe.src).href;
                
                document.getElementById('url').value = userInput;
                const form = document.getElementById('idk');
                form.dispatchEvent(new Event('submit', { bubbles: true, cancelable: true }));
              }
            }
          }
        }, true);
        
      } catch (e) {
        console.log("Iframe integration unavailable (CORS):", e.message);
      }
    });

    // ===== SEARCH SUGGESTIONS =====
    let suggestionsTimeout;
    let recentSearches = JSON.parse(localStorage.getItem('recentSearches') || '[]');

    const urlInput = document.getElementById('url');
    const suggestionsContainer = document.getElementById('searchSuggestions');

    function saveSuggestion(text) {
      if (!text || text.length < 2) return;
      recentSearches = recentSearches.filter(s => s.toLowerCase() !== text.toLowerCase());
      recentSearches.unshift(text);
      recentSearches = recentSearches.slice(0, 20);
      localStorage.setItem('recentSearches', JSON.stringify(recentSearches));
    }

    async function fetchSearchSuggestions(query) {
      if (!query || query.length < 2) return [];
      
      try {
        const selectedEngine = document.getElementById('searchEngine')?.value || 'google';
        
        // Detect if it's a URL
        if (query.includes('.') && !query.includes(' ')) {
          return [];
        }

        // Use DuckDuckGo API for search suggestions (works for all engines)
        const response = await fetch(`https://api.duckduckgo.com/?q=${encodeURIComponent(query)}&format=json`);
        const data = await response.json();
        
        let suggestions = [];
        
        // Get related searches
        if (data.RelatedTopics && Array.isArray(data.RelatedTopics)) {
          suggestions = data.RelatedTopics.slice(0, 5).map(item => ({
            text: item.Result ? item.Result.replace(/<[^>]*>/g, '') : item.Text,
            type: 'search'
          }));
        }

        // Add recent searches
        const filtered = recentSearches.filter(s => s.toLowerCase().includes(query.toLowerCase())).slice(0, 3);
        filtered.forEach(s => {
          if (!suggestions.find(sug => sug.text.toLowerCase() === s.toLowerCase())) {
            suggestions.unshift({ text: s, type: 'recent' });
          }
        });

        return suggestions;
      } catch (error) {
        console.log('Suggestions API error:', error);
        // Fallback to recent searches only
        return recentSearches
          .filter(s => s.toLowerCase().includes(query.toLowerCase()))
          .slice(0, 5)
          .map(s => ({ text: s, type: 'recent' }));
      }
    }

    function displaySuggestions(suggestions) {
      suggestionsContainer.innerHTML = '';
      if (suggestions.length === 0) {
        suggestionsContainer.classList.remove('show');
        return;
      }

      suggestions.forEach(suggestion => {
        const item = document.createElement('div');
        item.className = 'suggestion-item';
        const icon = suggestion.type === 'recent' ? 'üïê' : 'üîç';
        item.innerHTML = `
          <span class="suggestion-icon">${icon}</span>
          <span class="suggestion-text">${escapeHtml(suggestion.text)}</span>
        `;
        
        item.addEventListener('click', () => {
          urlInput.value = suggestion.text;
          suggestionsContainer.classList.remove('show');
          saveSuggestion(suggestion.text);
          document.getElementById('idk').dispatchEvent(new Event('submit', { bubbles: true, cancelable: true }));
        });

        item.addEventListener('mousedown', (e) => {
          e.preventDefault();
        });

        suggestionsContainer.appendChild(item);
      });

      suggestionsContainer.classList.add('show');
    }

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    urlInput.addEventListener('input', async (e) => {
      const query = e.target.value.trim();
      
      clearTimeout(suggestionsTimeout);
      
      if (query.length < 2) {
        suggestionsContainer.classList.remove('show');
        return;
      }

      suggestionsTimeout = setTimeout(async () => {
        const suggestions = await fetchSearchSuggestions(query);
        displaySuggestions(suggestions);
      }, 300);
    });

    urlInput.addEventListener('focus', async (e) => {
      if (e.target.value.length < 2) {
        const suggestions = recentSearches.slice(0, 5).map(s => ({ text: s, type: 'recent' }));
        if (suggestions.length > 0) {
          displaySuggestions(suggestions);
        }
      }
    });

    urlInput.addEventListener('blur', () => {
      setTimeout(() => {
        suggestionsContainer.classList.remove('show');
      }, 200);
    });

    document.addEventListener('click', (e) => {
      if (!urlInput.contains(e.target) && !suggestionsContainer.contains(e.target)) {
        suggestionsContainer.classList.remove('show');
      }
    });

    // ===== INITIALIZATION =====
    function initializeApp() {
      initTheme();
      initSearchEngine();
      initWebsiteTitle();

      // Restore current page
      const currentPage = localStorage.getItem('currentPage') || 'home';
      if (currentPage !== 'home') {
        document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
        document.getElementById(currentPage).classList.add('active');
        
        document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
        document.querySelector(`[onclick="switchPage('${currentPage}')"]`).classList.add('active');
      }

      if (tabs.length === 0) createTab();
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initializeApp);
    } else {
      initializeApp();
    }
  </script>
</body>
</html>
